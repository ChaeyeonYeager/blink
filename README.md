ìœ íŠœë¸Œ: https://youtu.be/lmoJ5ljFtD8?feature=shared

# ğŸ”† Arduino + p5.js ê¸°ë°˜ ì¸í„°ë™í‹°ë¸Œ LED ì œì–´ ë° ì‹œê°í™” ì‹œìŠ¤í…œ

ì´ í”„ë¡œì íŠ¸ëŠ” **Arduino Uno ë³´ë“œ**ì™€ **ì›¹ ê¸°ë°˜ p5.js ì¸í„°í˜ì´ìŠ¤**ë¥¼ ì—°ë™í•˜ì—¬,  
LED ì¡°ëª… ì‹œìŠ¤í…œì˜ ìƒíƒœë¥¼ **ì‹¤ì‹œê°„ ì‹œê°í™”**í•˜ê³ , **ì‚¬ìš©ì ì œì–´ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ì–‘í•œ ëª¨ë“œ ë™ì‘ì„ êµ¬í˜„**í•˜ëŠ” ì¢…í•© í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

---

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

ë³¸ ì‹œìŠ¤í…œì€ **TaskSchedulerë¥¼ ì´ìš©í•œ LED ì œì–´ ì•Œê³ ë¦¬ì¦˜**,  
**ê°€ë³€ì €í•­ ê¸°ë°˜ ë°ê¸° ì¡°ì ˆ**, **3ê°€ì§€ íŠ¹ìˆ˜ ëª¨ë“œ(ë¹„ìƒ/ì „ì²´ ê¹œë¹¡ì„/ì‹œìŠ¤í…œ OFF)**,  
ê·¸ë¦¬ê³  **p5.js ê¸°ë°˜ ì‹œë¦¬ì–¼ í†µì‹  UI**ë¥¼ ê²°í•©í•œ **í•˜ë“œì›¨ì–´-ì†Œí”„íŠ¸ì›¨ì–´ í†µí•©í˜• IoT í”„ë¡œì íŠ¸**ì…ë‹ˆë‹¤.

í•™ìŠµ ëª©ì , ì¡¸ì—… í”„ë¡œì íŠ¸, ë©”ì´ì»¤ í™œë™, êµë³´ì¬ë¡œë„ ì ê·¹ í™œìš© ê°€ëŠ¥í•œ ê³ ê¸‰ ì˜ˆì œì…ë‹ˆë‹¤.

---

## ğŸ”§ ì‹œìŠ¤í…œ êµ¬ì„± ìš”ì†Œ ë° íŠ¹ì§•

### âœ… í•˜ë“œì›¨ì–´ êµ¬ì„± (Arduino Uno ê¸°ë°˜)
- **3ìƒ‰ LED (Red, Yellow, Blue)** â†’ Task ê¸°ë°˜ ìˆœì°¨ ì ë“±/ê¹œë¹¡ì„ ì œì–´
- **ê°€ë³€ì €í•­ (Potentiometer)** â†’ LED ë°ê¸° ì‹¤ì‹œê°„ ì¡°ì ˆ
- **3ê°œì˜ ë²„íŠ¼ ìŠ¤ìœ„ì¹˜**
  - Emergency Mode í† ê¸€
  - All Blink Mode í† ê¸€
  - System ON/OFF ì œì–´

### âœ… ì†Œí”„íŠ¸ì›¨ì–´ êµ¬ì„±
- **Arduino ì½”ë“œ (C++)**
  - TaskSchedulerë¡œ ê° LED ë™ì‘ì„ ë…ë¦½ Taskë¡œ ê´€ë¦¬
  - ë²„íŠ¼ ì¸í„°ëŸ½íŠ¸ë¥¼ í†µí•œ ìƒíƒœ ì „í™˜ êµ¬í˜„
  - ì‹œë¦¬ì–¼ í†µì‹  ê¸°ë°˜ ì™¸ë¶€ ëª…ë ¹ ìˆ˜ì‹  ì²˜ë¦¬
- **p5.js (JavaScript + Web UI)**
  - ì‹œë¦¬ì–¼ í¬íŠ¸ ì—°ê²° ë° í†µì‹ 
  - ìŠ¬ë¼ì´ë” UIë¡œ LED ì£¼ê¸° ì„¤ì •
  - ì‹œê°ì ì¸ ì‹ í˜¸ë“± ë° ë°ê¸° ê²Œì´ì§€ í‘œí˜„
  - ì‹œìŠ¤í…œ ìƒíƒœ ì¸ë””ì¼€ì´í„° (LOOP/B1/B2/B3)

---

## ğŸ–¥ íšŒë¡œ êµ¬ì„±ë„

ì•„ë˜ ì´ë¯¸ì§€ëŠ” ì „ì²´ í•˜ë“œì›¨ì–´ ë°°ì„  êµ¬ì„±ì„ ì‹œê°í™”í•œ íšŒë¡œë„ì…ë‹ˆë‹¤.

![íšŒë¡œ êµ¬ì„±ë„](image.png)

### ğŸª› í•€ ì—°ê²° ìš”ì•½

| êµ¬ì„± ìš”ì†Œ | ì—°ê²° í•€ |
|-----------|----------|
| RED LED   | D11 (PWM) |
| YELLOW LED| D9 (PWM) |
| BLUE LED  | D10 (PWM) |
| ê°€ë³€ì €í•­(POT) | A0 (Analog ì…ë ¥) |
| Emergency ë²„íŠ¼ | D5 (Interrupt í•€) |
| All Blink ë²„íŠ¼ | D6 (Interrupt í•€) |
| System ON/OFF ë²„íŠ¼ | D7 (Interrupt í•€) |

> ëª¨ë“  ë²„íŠ¼ì€ **INPUT_PULLUP ëª¨ë“œ**ë¡œ ë™ì‘í•˜ë©°, LEDì—ëŠ” **220â„¦~330â„¦ ì €í•­**ì´ ì—°ê²°ë˜ì–´ ì „ë¥˜ë¥¼ ì œí•œí•©ë‹ˆë‹¤.
> ë²„íŠ¼ì˜ ê¸°ë³¸ ìƒíƒœëŠ” HIGH, ëˆŒë¦¬ë©´ LOW

---

## ğŸ”„ ì‹œìŠ¤í…œ ë™ì‘ íë¦„

### ê¸°ë³¸ ë£¨í”„ ëª¨ë“œ
1. **RED â†’ YELLOW â†’ BLUE â†’ BLUE BLINK(3íšŒ) â†’ YELLOW â†’ RED ... ë°˜ë³µ**
2. ê° ë‹¨ê³„ëŠ” `TaskScheduler`ë¡œ ê´€ë¦¬ë˜ì–´ ë¹„ë™ê¸°ì ì´ê³  ë…ë¦½ì ìœ¼ë¡œ ì‘ë™

### íŠ¹ìˆ˜ ëª¨ë“œ
| ëª¨ë“œ | ì„¤ëª… |
|------|------|
| Emergency Mode (B1) | RED LEDê°€ ê¹œë¹¡ì´ë©° ì‹œìŠ¤í…œ Task ì¤‘ë‹¨ |
| All Blink Mode (B2) | ëª¨ë“  LEDê°€ ë™ê¸°í™”ëœ ì£¼ê¸°ë¡œ ê¹œë¹¡ì„ |
| System OFF Mode (B3) | ëª¨ë“  Task ì¢…ë£Œ ë° LED OFF ìƒíƒœ ìœ ì§€ |

---

## ğŸ“¡ ì‹œë¦¬ì–¼ í†µì‹  ëª…ë ¹ í¬ë§·

### âœ… p5.js â†’ Arduino ëª…ë ¹ì–´

| ëª…ë ¹ì–´ ì˜ˆì‹œ | ê¸°ëŠ¥ ì„¤ëª… |
|-------------|-----------|
| `RED_TIME:1000` | RED Task ì£¼ê¸°ë¥¼ 1000msë¡œ ì„¤ì • |
| `YELLOW_TIME:700` | YELLOW Task ì£¼ê¸°ë¥¼ 700msë¡œ ì„¤ì • |
| `BLUE_TIME:1500` | BLUE Task ì£¼ê¸°ë¥¼ 1500msë¡œ ì„¤ì • |

### âœ… Arduino â†’ p5.js ìƒíƒœ ì „ì†¡

| ë©”ì‹œì§€ | ì˜ë¯¸ |
|--------|------|
| `B:128` | í˜„ì¬ ë°ê¸°ê°’ (0~255) |
| `LED:RED`, `LED:BLUE_BLINK`, ... | í˜„ì¬ LED ìƒíƒœ |
| `LED_STATE:ON` or `OFF` | ê¹œë¹¡ì„ ìƒíƒœ (ON: ì ë“± ì¤‘) |
| `B1`, `B2`, `B3` | ì‹œìŠ¤í…œ ìƒíƒœ í‘œì‹œ

---

## ğŸŒˆ p5.js ì¸í„°í˜ì´ìŠ¤ ê¸°ëŠ¥ ì„¤ëª…

### ğŸš ìŠ¬ë¼ì´ë” UI
- `Red Period` : RED Task ì£¼ê¸° ì¡°ì ˆ
- `Yellow Period` : YELLOW Task ì£¼ê¸° ì¡°ì ˆ
- `Blue Period` : ê³ ì •ê°’, ë¹„í™œì„±í™”ë¨

### ğŸ–¥ ì‹œê°í™” ìš”ì†Œ
- **LED ì‹ í˜¸ë“±** : í˜„ì¬ ìƒíƒœì— ë”°ë¼ ìƒ‰ìƒ ì ë“±
- **ë°ê¸° ê²Œì´ì§€ ë°”** : ê°€ë³€ì €í•­ ìƒíƒœ ë°˜ì˜
- **System State ì¸ë””ì¼€ì´í„°** : LOOP, B1, B2, B3 ìƒíƒœ ì›í˜• í‘œì‹œ
- **Connect ë²„íŠ¼** : ì‹œë¦¬ì–¼ í¬íŠ¸ ì—°ê²°/í•´ì œ


---

## ğŸ§© ì‚¬ìš© ë¶€í’ˆ ëª©ë¡

- Arduino Uno R3 ë³´ë“œ
- ë¸Œë ˆë“œë³´ë“œ
- LED (RED, YELLOW, BLUE)
- ì €í•­ (220â„¦~330â„¦) Ã— 3
- ê°€ë³€ì €í•­(Potentiometer) Ã— 1
- í‘¸ì‹œ ë²„íŠ¼ ìŠ¤ìœ„ì¹˜ Ã— 3
- ì í¼ ì™€ì´ì–´ ì„¸íŠ¸

---

## ğŸ’¡ í™œìš© ì•„ì´ë””ì–´

- **êµìœ¡ìš© ì‹¤ìŠµ (ë¬¼ë¦¬+ì½”ë”© í†µí•© ìˆ˜ì—…)**
- **ì¡¸ì—… í”„ë¡œì íŠ¸/ìº¡ìŠ¤í†¤ ë””ìì¸**
- **ìŠ¤ë§ˆíŠ¸ ì¡°ëª… ì‹œìŠ¤í…œì˜ ê¸°ì´ˆ êµ¬ì„± ì‹¤ìŠµ**
- **ì›¹-í•˜ë“œì›¨ì–´ ì—°ë™ ê¸°ìˆ  ìŠµë“**

---


---

## ğŸ–ï¸ ì œìŠ¤ì²˜ ê¸°ë°˜ ì œì–´ ê¸°ëŠ¥ ë° ì½”ë“œ íë¦„ ì„¤ëª…

ë³¸ ì‹œìŠ¤í…œì€ **ml5.jsì˜ HandPose ëª¨ë¸**ê³¼ **p5.js**ë¥¼ í™œìš©í•˜ì—¬,  
ì›¹ìº ì„ í†µí•´ ì‚¬ìš©ìì˜ ì† ì œìŠ¤ì²˜ë¥¼ ì‹¤ì‹œê°„ ì¸ì‹í•˜ê³  Arduino ì‹œìŠ¤í…œì„ ì›ê²© ì œì–´í•˜ëŠ” ê¸°ëŠ¥ì„ í¬í•¨í•©ë‹ˆë‹¤.  
ì´ë¥¼ í†µí•´ ë¬¼ë¦¬ ë²„íŠ¼ ì—†ì´ **ì œìŠ¤ì²˜ë§Œìœ¼ë¡œ ëª¨ë“œ ì „í™˜ ë° LED ì£¼ê¸° ì¡°ì ˆ**ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### ğŸ“Œ ì‹œìŠ¤í…œ ì œì–´ íë¦„ ê°œìš”

#### 1ï¸âƒ£ HandPose ê¸°ë°˜ ì œìŠ¤ì²˜ ì¸ì‹
- `ml5.handPose` ëª¨ë¸ì´ ì›¹ìº  ì˜ìƒì„ í†µí•´ ì–‘ì†ì˜ **ì†ê°€ë½ ê´€ì ˆ keypoint ì¢Œí‘œ**ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ì¶œí•©ë‹ˆë‹¤.
- ì¢Œí‘œ ê¸°ì¤€ìœ¼ë¡œ **ì™¼ì†/ì˜¤ë¥¸ì† ë¶„ë¥˜** í›„, ì†ê°€ë½ í¼ì¹¨ ìƒíƒœì™€ ì—„ì§€ ìœ„ì¹˜ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.

#### 2ï¸âƒ£ ì œì–´ ì¡°ê±´ ë¶„ê¸° ë¡œì§
- **ì™¼ì†ì´ ì£¼ë¨¹ ìƒíƒœì¼ ë•Œ**: ì˜¤ë¥¸ì† ì†ê°€ë½ ê°œìˆ˜ë¡œ **ì‹œìŠ¤í…œ ëª¨ë“œ(B1/B2/B3/LOOP)** ì „í™˜
- **ì™¼ì†ì´ ì†ê°€ë½ì„ í¼ì¹œ ìƒíƒœì¼ ë•Œ**: ì™¼ì† ì†ê°€ë½ ìˆ˜ì— ë”°ë¼ ì¡°ì ˆ ëŒ€ìƒ LED(R/Y/B)ë¥¼ ì§€ì •í•˜ê³ ,
  ì˜¤ë¥¸ì†ì˜ **Thumbs Up/Down** ì œìŠ¤ì²˜ë¡œ **LED ì£¼ê¸°ë¥¼ Â±100ms**ì”© ì¡°ì ˆí•©ë‹ˆë‹¤.

#### 3ï¸âƒ£ ìƒíƒœ ì „ì†¡
- p5.jsëŠ” ì‚¬ìš©ìì˜ ì œìŠ¤ì²˜ í•´ì„ ê²°ê³¼ë¥¼ **ì‹œë¦¬ì–¼ ëª…ë ¹ì–´ í˜•íƒœ**ë¡œ ì•„ë‘ì´ë…¸ì— ì „ì†¡í•©ë‹ˆë‹¤.
- ì˜ˆ: `RED_TIME:1200`, `B2`, `LOOP` ë“±

---

### âœ‹ ì œìŠ¤ì²˜ ê¸°ë°˜ ì‹œìŠ¤í…œ ëª¨ë“œ ì œì–´ (ì™¼ì† ì£¼ë¨¹ + ì˜¤ë¥¸ì† ì†ê°€ë½ ìˆ˜)

| ì˜¤ë¥¸ì† ì†ê°€ë½ ìˆ˜ | ì‹œìŠ¤í…œ ì œì–´ ëª…ë ¹ | ê¸°ëŠ¥ ì„¤ëª… |
|------------------|------------------|-----------|
| 0ê°œ              | `LOOP`           | ê¸°ë³¸ ë£¨í”„ ëª¨ë“œ ë³µê·€ |
| 1ê°œ              | `B1`             | Emergency Mode (RED ê¹œë¹¡ì„) |
| 2ê°œ              | `B2`             | All Blink Mode (ì „ì²´ LED ë™ì‹œ ê¹œë¹¡ì„) |
| 3ê°œ              | `B3`             | System OFF Mode (ì „ì²´ Task ì •ì§€) |

â€» 0.5ì´ˆ ì¿¨ë‹¤ìš´ ì„¤ì •ìœ¼ë¡œ ì¤‘ë³µ ëª…ë ¹ ë°©ì§€

---

### ğŸ”§ LED ì£¼ê¸° ì¡°ì ˆ ì œìŠ¤ì²˜ ì œì–´ (ì™¼ì† ì†ê°€ë½ ìˆ˜ + ì˜¤ë¥¸ì† ì—„ì§€ ë°©í–¥)

| ì™¼ì† ì†ê°€ë½ ìˆ˜ | ì¡°ì ˆ ëŒ€ìƒ LED | Thumbs Up | Thumbs Down |
|----------------|----------------|-----------|--------------|
| 1ê°œ            | RED LED        | +100ms    | -100ms       |
| 2ê°œ            | YELLOW LED     | +100ms    | -100ms       |
| 3ê°œ            | BLUE LED       | +100ms    | -100ms       |

- í•´ë‹¹ ì£¼ê¸°ëŠ” p5.js ìŠ¬ë¼ì´ë”ì™€ ë™ê¸°í™”ë˜ë©°, ì‹œë¦¬ì–¼ë¡œ ì•„ë‘ì´ë…¸ì— ì‹¤ì‹œê°„ ì „ì†¡ë©ë‹ˆë‹¤.

---

## âš™ï¸ ì•„ë‘ì´ë…¸ ì½”ë“œ êµ¬ì¡° ë° ë™ì‘ íë¦„

### ğŸ”¸ ì‹œë¦¬ì–¼ ëª…ë ¹ì–´ ì²˜ë¦¬ í•¨ìˆ˜: `void processSerialCommands()`

ì´ í•¨ìˆ˜ëŠ” **p5.jsë¡œë¶€í„° ìˆ˜ì‹ í•œ ëª…ë ¹ì–´ë¥¼ íŒŒì‹±**í•˜ì—¬ ì‹œìŠ¤í…œ ëª¨ë“œ ë³€ê²½ ë˜ëŠ” LED ì£¼ê¸°ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤.

#### ğŸ§  ë‚´ë¶€ íë¦„ ìš”ì•½

```cpp
void processSerialCommands() {
  while (Serial.available() > 0) {
    String cmd = Serial.readStringUntil('\\n');
    cmd.trim();
    if (cmd.length() == 0) continue;

    // [1] ì‹œìŠ¤í…œ ëª¨ë“œ ì „í™˜ ëª…ë ¹ì–´ (ë‹¨ì¼ í‚¤ì›Œë“œ: LOOP, B1, B2, B3)
    if (cmd.indexOf(':') == -1) {
      if (cmd == \"LOOP\") {
        // ê¸°ë³¸ ë£¨í”„ ëª¨ë“œ ë³µê·€: RED Taskë¶€í„° ì¬ì‹œì‘
      } else if (cmd == \"B1\") {
        // Emergency Mode: RED ê¹œë¹¡ì„, ëª¨ë“  Task ì •ì§€
      } else if (cmd == \"B2\") {
        // All Blink Mode: ëª¨ë“  LED ë™ê¸° ê¹œë¹¡ì„
      } else if (cmd == \"B3\") {
        // System OFF: ëª¨ë“  LED OFF ë° Task ì¢…ë£Œ
      }
    }

    // [2] LED ì£¼ê¸° ì„¤ì • ëª…ë ¹ì–´ (RED_TIME:x, YELLOW_TIME:x, BLUE_TIME:x)
    else {
      int idx = cmd.indexOf(':');
      String key = cmd.substring(0, idx);
      String val = cmd.substring(idx + 1);
      long period = val.toInt();
      if (key == \"RED_TIME\") {
        taskRed.setInterval(period);
      } else if (key == \"YELLOW_TIME\") {
        taskYellow.setInterval(period);
        taskYellow2.setInterval(period);
      } else if (key == \"BLUE_TIME\") {
        taskBlue.setInterval(period);
      }
    }
  }
}

